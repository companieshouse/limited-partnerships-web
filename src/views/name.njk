{% extends "layout.njk" %}

{% block content %}


{% if type = "" %}

{% else %}

{% endif %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    function validateNameLength() {
      const name = nameField.value + " " + suffixDiv.textContent;
      const maxLength = 160;
      if (name.length > maxLength){
        nameField.setCustomValidity(`Max length including suffix is ${maxLength} characters`);
      } else {
        nameField.setCustomValidity('');
      }
      nameField.reportValidity();
    };

    const suffixDiv = document.querySelector('.govuk-input__suffix');
    const radioButtons = document.querySelectorAll('input[name="name_ending"]');

    radioButtons.forEach(function(radioButton) {
      radioButton.addEventListener('change', function() {
        if (radioButton.checked) {
          suffixDiv.textContent = radioButton.value;
          validateNameLength();
        }
      });
    });

    const nameField = document.getElementById('partnership_name');
    nameField.addEventListener('keyup', validateNameLength);

    const form = document.querySelector('.form');

    form.addEventListener('submit', function(evt) {
      if (!suffixDiv.textContent) {
        evt.preventDefault();
      }
      nameField.value = nameField.value.trim();
    });

    const params = new URLSearchParams(document.location.search);
    const whichType = params.get("which-type");
  });
</script>

{% endblock %}
