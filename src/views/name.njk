{% extends "layout.njk" %}

{% block content %}


<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <form class="form" action={{props.currentUrl}} method="post">
      <input type="hidden" name="transactionType" value={{ props.transactionType }}>

      <h1 class="govuk-heading-xl">Limited partnership name</h1>

      <div class="govuk-form-group">
        <h1 class="govuk-label-wrapper">
          <label class="govuk-label govuk-label--l" for="partnership_name">
            What's the name of the limited partnership?
          </label>
        </h1>

        <div id="partnership_name-hint" class="govuk-hint">
          Do not enter a name ending, like Limited Partnership or LP. We'll
          add this for you.
        </div>

        <div class="govuk-input__wrapper">
          <input
            class="govuk-input"
            id="partnership_name"
            name="partnership_name"
            type="text"
            aria-describedby="partnership_name-hint"
            required
            minLength="3"
          />

          <div class="govuk-input__suffix" aria-hidden="true">
            Limited Partnership
          </div>
        </div>
      </div>

      <details class="govuk-details">
        <summary class="govuk-details__summary">
          <span class="govuk-details__summary-text">
            Check you can use the name
          </span>
        </summary>
        <div class="govuk-details__text">
          <p>
            You must check the name is not the same as an existing limited
            partnership on the
            <a href="#/">Companies House register (link opens in a new tab)</a
            >. If it is, we will reject your application.
          </p>
          <p>
            You should also use the
            <a href="https://www.gov.uk/search-for-trade mark" target="_blank"
              >trade mark search (link opens in a new tab)</a
            >
            to check if your name matches an existing trade mark. If it does,
            consider choosing a different name. Companies House will not carry
            out this check for you.
          </p>
        </div>
      </details>

      <div class="govuk-form-group">
        <fieldset class="govuk-fieldset" aria-describedby="nameEnding-hint">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
            <h1 class="govuk-fieldset__heading">
              Which name ending would you prefer to go on the public record?
            </h1>
          </legend>

          <div id="nameEnding-hint" class="govuk-hint">
            There's no difference between the name endings Limited
            Partnership, LP and L.P. except for how they look.
          </div>

          <div class="govuk-radios" data-module="govuk-radios">
            <div class="govuk-radios__item">
              <input
                class="govuk-radios__input"
                id="nameEnding"
                name="name_ending"
                type="radio"
                value="Limited Partnership"
                required
              />
              <label class="govuk-label govuk-radios__label" for="nameEnding">
                Limited Partnership
              </label>
            </div>

            <div class="govuk-radios__item">
              <input
                class="govuk-radios__input"
                id="nameEnding-2"
                name="name_ending"
                type="radio"
                value="LP"
                required
              />
              <label
                class="govuk-label govuk-radios__label"
                for="nameEnding-2"
              >
                LP
              </label>
            </div>

            <div class="govuk-radios__item">
              <input
                class="govuk-radios__input"
                id="nameEnding-3"
                name="name_ending"
                type="radio"
                value="L.P."
                required
              />
              <label
                class="govuk-label govuk-radios__label"
                for="nameEnding-3"
              >
                L.P.
              </label>
            </div>

            <div class="govuk-radios__item">
              <input
                class="govuk-radios__input"
                id="nameEnding-4"
                name="name_ending"
                type="radio"
                value=""
                aria-controls="conditional-nameEnding-4"
                aria-expanded="false"
              />
              <label
                class="govuk-label govuk-radios__label"
                for="nameEnding-4"
              >
                A Welsh name ending
              </label>
            </div>

            <div
              class="govuk-radios__conditional govuk-radios__conditional--hidden"
              id="conditional-nameEnding-4"
            >
              <div class="govuk-form-group">
                <fieldset class="govuk-fieldset">
                  <legend
                    class="govuk-fieldset__legend govuk-visually-hidden"
                  >
                    <h1 class="govuk-fieldset__heading">
                      What other name ending would you prefer?
                    </h1>
                  </legend>

                  <div class="govuk-radios" data-module="govuk-radios">
                    <div class="govuk-radios__item">
                      <input
                        class="govuk-radios__input"
                        id="nameEnding"
                        name="name_ending"
                        type="radio"
                        value="Partneriaeth Cyfyngedig"
                        required
                      />
                      <label
                        class="govuk-label govuk-radios__label"
                        for="nameEnding"
                      >
                        Partneriaeth Cyfyngedig
                      </label>
                    </div>

                    <div class="govuk-radios__item">
                      <input
                        class="govuk-radios__input"
                        id="nameEnding-2"
                        name="name_ending"
                        type="radio"
                        value="PC"
                        required
                      />
                      <label
                        class="govuk-label govuk-radios__label"
                        for="nameEnding-2"
                      >
                        PC
                      </label>
                    </div>

                    <div class="govuk-radios__item">
                      <input
                        class="govuk-radios__input"
                        id="nameEnding-3"
                        name="name_ending"
                        type="radio"
                        value="P.C."
                        required
                      />
                      <label
                        class="govuk-label govuk-radios__label"
                        for="nameEnding-3"
                      >
                        P.C.
                      </label>
                    </div>
                  </div>
                </fieldset>
              </div>
            </div>
          </div>
        </fieldset>
      </div>

      <button type="submit" class="govuk-button" data-module="govuk-button">
        Save and continue
      </button>
    </form>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const suffixDiv = document.querySelector('.govuk-input__suffix');
    const radioButtons = document.querySelectorAll('input[name="name_ending"]');

    radioButtons.forEach(function(radioButton) {
      radioButton.addEventListener('change', function() {
        if (radioButton.checked) {
          suffixDiv.textContent = radioButton.value;
        }
      });
    });

    const form = document.querySelector('.form');

    form.addEventListener('submit', function(evt) {
      if (!suffixDiv.textContent) {
        evt.preventDefault();
      }
    });
  });
</script>

{% endblock %}
